<!DOCTYPE html>
<html>

<head>
  <meta charset=utf-8 />
  <title>One Tam Featured Hikes</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <!-- Is the is the latest version of Leaflet? -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">

  <style>
    body {
      margin: 0;
      padding: 0;

    }

    html, body, #map {
      height: 100%;
      width: 100%
    }

  </style>
</head>

<body>

  <div id='map'></div>

   <!-- Is the is the latest version of Leaflet? -->
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
  <script src="data/OneTamFeaturedTrailheads.js"></script>
  <script src="data/OneTamFeaturedTrails.js"></script>
  <script>
    var map = L.map('map', {
      center: [37.887914, -122.578138],
      zoom: 12,
    });

      var tiles = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}{r}.{ext}', {
        attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        subdomains: 'abcd',
        maxZoom: 18,
        ext: 'png'
      });
      tiles.addTo(map);
  
  
  var westPeak = L.geoJson(featuredTrailHeads, {
   pointToLayer: function(feature, latLng) {
    return L.circleMarker(latLng);
    },
    // set marker style
    style: function (feature) {
      return {
      color: '#000000',
      fillColor: '#f6c65b',
      weight: 1,
      stroke: 1,
      fillOpacity: 1,
      radius: 5
      }
    }
   }).addTo(map); 

    // eval from Boyd
  //  Get list of all names for all segments
   var allTrails = {} // variable assigned to empty object to hold variable names for each leaflet geoJson layer
   // loop through allTrails object, trail is property name of the feature properties in geoJson -- need clarity on use of "of" here
  //  The for .. of loops through an array. It's an update of this: for(var i = 0; i < myArray.length; i++ )
    for (trail of featuredTrails.features) {
      // assign variable to trailName value
      var name = trail.properties.trailName
      // if name is not equal to null in name variable
      if (name != null) {
        // if not all allTrails accessing trailName through [name] array

        // This if statement adds the trail name to a JS object and the number of times the segment is found
        // if the key is not in the object...
        if (!allTrails[name]) {
          // ... assign the key in the object and give it a value of 1
          allTrails[name] = 1 // I'm not clear on what's happening with these operands here and in the else statement
          // else it is found in the object, add 1 to the existing value
        } else {
          allTrails[name] += 1
        }
      }
    }
    console.log(allTrails)

  // make these only display on zoomTo
 var trailsLayer =  L.geoJson(featuredTrails, {
   pointToLayer: function(feature, latLngs){
     return L.polyline (feature, latLngs);
   },
  filter: function(feature) {
    // Test for equivalence, then return feature
    if (feature.properties.trailName == "West Peak Loop")
          return feature
   },

   //  style: function (feature) {
  //  return {
  //    color: '#FFFF00',
  //    opacity: .5,
  //    weight: 3
 //   }
//  }

//   var bounds = L.latLngBounds(feature.properties.trailName == "West Peak Loop");
// Zac master

  // var trailsLayer =  L.geoJson(featuredTrails, {
 //   pointToLayer: function(feature, latLngs){
  //    return L.polyline (feature, latLngs);
//    },
     
//  filter: function(feature, latLngs) {
//   if (feature.properties.trailName == "West Peak Loop") 
//          return feature;
//  },
  
 }).addTo(map); 

 

 map.fitBounds(bounds)
     
    </script>
</body>
</html>